<!-- Navigation Bar Component -->
<style>
  .navbar {
    background: linear-gradient(135deg, #B76E79 0%, #CD7F32 100%);
    padding: 15px 20px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    position: sticky;
    top: 0;
    z-index: 1000;
  }

  .navbar-brand {
    color: white;
    font-size: 1.5rem;
    font-weight: 700;
    text-decoration: none;
    display: flex;
    align-items: center;
    gap: 8px;
  }

  .navbar-menu {
    display: flex;
    gap: 25px;
    align-items: center;
  }

  .nav-link {
    color: white;
    text-decoration: none;
    font-weight: 500;
    padding: 8px 12px;
    border-radius: 6px;
    transition: all 0.3s;
    display: flex;
    align-items: center;
    gap: 5px;
  }

  .nav-link:hover {
    background: rgba(255, 255, 255, 0.2);
    transform: translateY(-2px);
  }

  .nav-link.active {
    background: rgba(255, 255, 255, 0.3);
    border-bottom: 2px solid white;
  }

  .nav-auth {
    display: flex;
    align-items: center;
    gap: 15px;
  }

  .user-info {
    color: white;
    font-size: 0.9rem;
  }

  .btn-logout {
    background: rgba(255, 255, 255, 0.2);
    color: white;
    border: 1px solid white;
    padding: 8px 16px;
    border-radius: 6px;
    cursor: pointer;
    font-weight: 600;
    transition: all 0.3s;
  }

  .btn-logout:hover {
    background: white;
    color: #B76E79;
  }

  .badge {
    background: #ff6b6b;
    color: white;
    border-radius: 50%;
    width: 24px;
    height: 24px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 0.8rem;
    font-weight: 700;
  }

  .mobile-menu-btn {
    background: none;
    border: none;
    color: white;
    font-size: 1.5rem;
    cursor: pointer;
    display: none;
  }

  @media(max-width: 768px) {
    .navbar {
      flex-direction: column;
      gap: 15px;
    }

    .navbar-menu {
      flex-direction: column;
      width: 100%;
      gap: 10px;
      display: none;
    }

    .navbar-menu.active {
      display: flex;
    }

    .mobile-menu-btn {
      display: block;
      position: absolute;
      right: 20px;
      top: 15px;
    }

    .nav-link {
      width: 100%;
      padding: 12px;
      justify-content: flex-start;
    }
  }
</style>

<nav class="navbar">
  <a href="index.html" class="navbar-brand">
    <ion-icon name="bag-handle-outline"></ion-icon> Dressify AI
  </a>

  <button class="mobile-menu-btn" onclick="toggleMenu()">
    <ion-icon name="menu-outline"></ion-icon>
  </button>

  <div class="navbar-menu" id="navMenu">
    <a href="index.html" class="nav-link" onclick="setActive(this)">
      <ion-icon name="home-outline"></ion-icon> Home
    </a>
    <a href="ai-hub.html" class="nav-link" onclick="setActive(this)">
      <ion-icon name="sparkles-outline"></ion-icon> AI Hub
    </a>
    <a href="avatar-customizer.html" class="nav-link" onclick="setActive(this)">
      <ion-icon name="person-outline"></ion-icon> Avatar
    </a>
    <a href="gemini_chatbot.html" class="nav-link" onclick="setActive(this)">
      <ion-icon name="chatbubbles-outline"></ion-icon> Chat
    </a>
    <a href="bodyshape.html" class="nav-link" onclick="setActive(this)">
      <ion-icon name="body-outline"></ion-icon> Body Shape
    </a>

    <div class="nav-auth">
      <span class="user-info" id="userInfo" style="display:none;">
        <ion-icon name="person-outline"></ion-icon> <span id="userName"></span>
      </span>
      <button class="btn-logout" id="logoutBtn" onclick="logout()" style="display:none;">
        Logout
      </button>
      <a href="login.html" class="nav-link" id="loginLink">
        <ion-icon name="log-in-outline"></ion-icon> Login
      </a>
    </div>
  </div>
</nav>

<script>
  function toggleMenu() {
    document.getElementById('navMenu').classList.toggle('active');
  }

  function setActive(el) {
    document.querySelectorAll('.nav-link').forEach(link => link.classList.remove('active'));
    el.classList.add('active');
  }

  function updateNav() {
    const token = localStorage.getItem('token');
    const user = localStorage.getItem('user');
    const cartCount = localStorage.getItem('cart') ? JSON.parse(localStorage.getItem('cart')).length : 0;

    // Update cart badge
    if (cartCount > 0) {
      document.getElementById('cartBadge').textContent = cartCount;
      document.getElementById('cartBadge').style.display = 'flex';
    }

    if (token && user) {
      const userData = JSON.parse(user);
      
      // Show logout button and user info
      document.getElementById('loginLink').style.display = 'none';
      document.getElementById('userInfo').style.display = 'flex';
      document.getElementById('userName').textContent = userData.fullname || userData.email || 'User';
      document.getElementById('logoutBtn').style.display = 'block';

      // Show admin menu if user is admin
      if (userData.isAdmin) {
        document.getElementById('adminMenu').style.display = 'block';
      }
    } else {
      document.getElementById('loginLink').style.display = 'block';
      document.getElementById('userInfo').style.display = 'none';
      document.getElementById('logoutBtn').style.display = 'none';
      document.getElementById('adminMenu').style.display = 'none';
    }
  }

  function logout() {
    if (confirm('Are you sure you want to logout?')) {
      localStorage.removeItem('token');
      localStorage.removeItem('user');
      window.location.href = 'index.html';
    }
  }

  // Update navigation on page load
  document.addEventListener('DOMContentLoaded', updateNav);
  
  // Update when storage changes
  window.addEventListener('storage', updateNav);
</script>

